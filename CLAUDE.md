# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a freestyle SAPUI5 application generated by SAP Fiori Application Generator. It follows the Model-View-Controller (MVC) pattern using SAPUI5 framework version 1.142.0.

**Key Details:**
- **Namespace:** `com.bootcamp.sapui5.freestyle`
- **Theme:** sap_horizon
- **OData Service:** Northwind OData V2 service (https://services.odata.org/northwind/northwind.svc/)
- **UI5 Version:** 1.142.0
- **Technology:** JavaScript (not TypeScript)

## Common Commands

### Development
```bash
npm start                    # Start app with Fiori Launchpad preview
npm run start-local          # Start with local UI5 libraries (faster, offline)
npm run start-mock           # Start with mock data (no backend required)
npm run start-noflp          # Start without Fiori Launchpad
```

### Testing
```bash
npm run unit-test            # Run unit tests (webapp/test/unit/)
npm run int-test             # Run OPA5 integration tests (webapp/test/integration/)
```

### Build & Deploy
```bash
npm run build                # Build for production (outputs to dist/)
npm run build:cf             # Build for Cloud Foundry deployment
npm run build:mta            # Build MTA archive for multi-target deployment
npm deploy                   # Deploy to Cloud Foundry
npm run undeploy             # Undeploy from Cloud Foundry
```

## Architecture

### Application Structure

```
webapp/
├── Component.js              # Root component, initializes routing and device model
├── manifest.json             # App descriptor (configuration, routing, models, data sources)
├── controller/               # MVC Controllers
│   ├── App.controller.js
│   └── Home.controller.js
├── view/                     # XML Views
│   ├── App.view.xml         # Root view
│   └── Home.view.xml        # Home page
├── model/
│   └── models.js            # Model factory (creates device model)
├── i18n/                    # Internationalization texts
├── css/                     # Custom styles
├── localService/            # Mock OData metadata and data
└── test/                    # Unit and integration tests
```

### Key Architectural Patterns

**Component-Based Architecture:**
- `Component.js` extends `sap.ui.core.UIComponent` and is the entry point
- Uses `manifest.json` (descriptor pattern) for declarative configuration
- Implements `sap.ui.core.IAsyncContentCreation` for async component initialization

**Routing:**
- Router class: `sap.m.routing.Router`
- Routes defined in `manifest.json` under `sap.ui5.routing`
- Default route: `RouteHome` with pattern `:?query:` targeting `TargetHome`
- Root view: `App.view.xml` contains the routing container

**Models:**
- **OData Model** (unnamed/"" model): Bound to Northwind OData V2 service, configured in manifest
- **i18n Model:** Resource bundle for internationalization
- **Device Model:** Created in `Component.js` via `models.createDeviceModel()` for responsive behavior

**Data Binding:**
- OData V2 service configured as `mainService` data source
- Metadata location: `webapp/localService/mainService/metadata.xml`
- Model preloaded on app initialization

### UI5 Configuration Files

- **ui5.yaml:** Default config for development (remote UI5, backend proxy)
- **ui5-local.yaml:** Local development with downloaded UI5 libraries and mock server
- **ui5-mock.yaml:** Development with mock data only (no real backend)
- **ui5-deploy.yaml:** Production build configuration for Cloud Foundry

### Middleware Pipeline

The app uses SAP Fiori tools middleware:
1. `fiori-tools-proxy`: Proxies backend calls to OData service and UI5 CDN
2. `fiori-tools-appreload`: Live reload on file changes (port 35729)
3. `fiori-tools-preview`: Fiori Launchpad preview environment
4. `sap-fe-mockserver`: Mock OData server for testing without backend

## Development Guidelines

### File Naming Conventions
- Controllers: `<Name>.controller.js` in `webapp/controller/`
- Views: `<Name>.view.xml` in `webapp/view/`
- Models: Descriptive names in `webapp/model/`
- Use namespace prefix: `com.bootcamp.sapui5.freestyle`

### Controller Pattern
All controllers extend `sap.ui.core.mvc.Controller` and use arrow function syntax:
```javascript
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";
    return Controller.extend("com.bootcamp.sapui5.freestyle.controller.<Name>", {
        onInit() {
            // Initialization
        }
    });
});
```

### Adding New Routes
1. Define route in `manifest.json` under `sap.ui5.routing.routes`
2. Add corresponding target in `sap.ui5.routing.targets`
3. Create view in `webapp/view/`
4. Create controller in `webapp/controller/`

### Mock Data Development
- Metadata: `webapp/localService/mainService/metadata.xml`
- Mock data directory: `webapp/localService/mainService/data/`
- Use `npm run start-mock` to develop against mock data
- Mock server auto-generates data based on metadata when `generateMockData: true`

## Cloud Foundry Deployment

The app uses Multi-Target Application (MTA) deployment model:
- **MTA descriptor:** `mta.yaml`
- **Security:** `xs-security.json` (XSUAA configuration)
- **App router:** `xs-app.json` (routes configuration)
- **Build:** Creates HTML5 app for HTML5 Application Repository service
- **Services:** Requires destination, XSUAA, and HTML5 apps repo services

## Testing Strategy

**Unit Tests:**
- Located in `webapp/test/unit/`
- Uses QUnit framework
- Test individual controllers and models

**Integration Tests:**
- Located in `webapp/test/integration/`
- Uses OPA5 (One Page Acceptance tests)
- Tests navigation journeys and user interactions
- Journey structure: Arrangements, Actions, Assertions

## Important Notes

- This is a **V2 template** using OData V2
- Application uses **JavaScript** (not TypeScript)
- No ESLint configuration included by default
- Uses sap_horizon theme (SAP's latest design language)
- Flex-enabled for UI adaptation and variant management
